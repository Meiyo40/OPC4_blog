{% extends '/layout/publiclayout.twig' %}

{% block title %}
    <title>
        My news
    </title>
{% endblock %}

{% block content %}
<h1 class="center" >Mes dernières nouvelles</h1>
    
    <div id='blog' class="container">
            {% for i in sizePage*(page-1)..sizePage*page-1 %}

                {% if posts[i] is defined %}
                     <article class='smallArticle'>
                        <a class='article-link' href='index.php?action=post&id={{ posts[i].id }}'>
                            <h3> {{ posts[i].title }} </h3>
                            <div>
                                <div class='article-content' style='display: block'>
                                    {% autoescape %}
                                        {{ posts[i].content|raw }}
                                    {% endautoescape %} 
                                </div>
                                <p class='article-signature'>
                                    Rédigé par: "{{ posts[i].author }}", le [" {{ posts[i].date }}"] <em><a href='index.php?action=post&id={{ posts[i].id }}'>[{{ posts[i].nb_comments }}] Commentaires</a></em>
                                </p>
                                <br>
                            </div>
                        </a>
                    </article> 
                {% endif %}
            
            {% endfor %}
            
            
        {% if nbPage > 1 %}
            <nav id="nav-Pagination">
                <ul class="pagination">
                    {% if page > 1 %}
                        <li class="page-item"><a class="page-link" href="index.php?page={{ page-1 }}">Previous</a></li>
                    {% else %}
                        <li class="page-item"><a class="page-link" href="index.php?page={{ nbPage }}">Previous</a></li>
                    {% endif %}

                    {% for i in 1..nbPage %}
                        <li id='page-link-{{ i }}' class='page-item'><a class='page-link' href='index.php?page={{ i }}'>{{ i }}</a></li>
                    {% endfor %}

                    {% if page < nbPage %}
                        <li class="page-item"><a class="page-link" href="index.php?page={{ page+1 }}">Next</a></li>
                    {% else %}
                        <li class="page-item"><a class="page-link" href="index.php?page=1">Next</a></li>
                    {% endif %}

                </ul>
            </nav>
        {% endif %} 
    </div>
{% endblock %}